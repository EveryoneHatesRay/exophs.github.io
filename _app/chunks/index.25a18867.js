import{H as b,ao as y,_ as m,s as q,N as w}from"./index.6fff21c0.js";const o=[];function z(s,u){return{subscribe:A(s,u).subscribe}}function A(s,u=b){let r;const t=new Set;function a(e){if(q(s,e)&&(s=e,r)){const i=!o.length;for(const n of t)n[1](),o.push(n,s);if(i){for(let n=0;n<o.length;n+=2)o[n][0](o[n+1]);o.length=0}}}function l(e){a(e(s))}function f(e,i=b){const n=[e,i];return t.add(n),t.size===1&&(r=u(a)||b),e(s),()=>{t.delete(n),t.size===0&&r&&(r(),r=null)}}return{set:a,update:l,subscribe:f}}function H(s,u,r){const t=!Array.isArray(s),a=t?[s]:s,l=u.length<2;return z(r,f=>{let e=!1;const i=[];let n=0,d=b;const _=()=>{if(n)return;d();const c=u(t?i[0]:i,f);l?f(c):d=w(c)?c:b},g=a.map((c,p)=>y(c,h=>{i[p]=h,n&=~(1<<p),e&&_()},()=>{n|=1<<p}));return e=!0,_(),function(){m(g),d(),e=!1}})}function N(s){return{subscribe:s.subscribe.bind(s)}}export{N as a,H as d,z as r,A as w};
